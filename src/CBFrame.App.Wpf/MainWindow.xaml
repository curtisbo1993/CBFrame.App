<Window x:Class="CBFrame.App.Wpf.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:fluent="urn:fluent-ribbon"
        xmlns:views="clr-namespace:CBFrame.App.Wpf.Views"
        Title="cb_FRAME – Structural Analysis"
        Height="720"
        Width="1280"
        Background="{DynamicResource AppBackgroundBrush}">
    <Grid>
        <!-- Layout: Ribbon / Content / Status bar -->
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <!-- Ribbon -->
            <RowDefinition Height="*"/>
            <!-- Main content -->
            <RowDefinition Height="Auto"/>
            <!-- Status bar -->
        </Grid.RowDefinitions>

        <!-- RIBBON -->
        <fluent:Ribbon Grid.Row="0"
                       Background="{DynamicResource RibbonBackgroundBrush}"
                       Foreground="{DynamicResource PanelForegroundBrush}">
            <fluent:Ribbon.Menu>
                <fluent:Backstage>
                    <fluent:BackstageTabItem Header="File">
                        <StackPanel Margin="16"
                                    Background="{DynamicResource RibbonBackgroundBrush}">
                        </StackPanel>
                    </fluent:BackstageTabItem>
                </fluent:Backstage>
            </fluent:Ribbon.Menu>

            <!-- MAIN RIBBON TABS -->

            <!-- Home tab -->
            <fluent:RibbonTabItem Header="Home">
                <fluent:RibbonGroupBox Header="Model" Margin="0,0,8,0">
                    <!-- NEW PROJECT -->
                    <fluent:Button Header="New Frame"
                   LargeIcon="{x:Null}"
                   ToolTip="Create a new frame model"
                   Click="NewProject_Click" />

                    <!-- OPEN PROJECT -->
                    <fluent:Button Header="Open"
                   LargeIcon="{x:Null}"
                   ToolTip="Open an existing frame model"
                   Click="OpenProject_Click" />

                    <!-- SAVE PROJECT -->
                    <fluent:Button Header="Save"
                   LargeIcon="{x:Null}"
                   ToolTip="Save the current frame model"
                   Click="SaveProject_Click" />
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>

            <!-- Model tab: tools + undo/redo -->
            <fluent:RibbonTabItem Header="Model">
                <!-- Modeling tools -->
                <fluent:RibbonGroupBox Header="Tools" Margin="0,0,8,0">
                    <fluent:Button Header="Select"
                                   Command="{Binding SelectToolCommand}"
                                   ToolTip="Select nodes and members" />

                    <fluent:Button Header="Node"
                                   Command="{Binding DrawNodeToolCommand}"
                                   ToolTip="Place a node in the model" />

                    <fluent:Button Header="Member"
                                   Command="{Binding DrawMemberToolCommand}"
                                   ToolTip="Draw a member between two nodes" />
                </fluent:RibbonGroupBox>

                <!-- Undo / Redo -->
                <fluent:RibbonGroupBox Header="Edit" Margin="0,0,8,0">
                    <fluent:Button Header="Undo"
                                   Command="{Binding UndoCommand}"
                                   IsEnabled="{Binding CanUndo}"
                                   ToolTip="Undo last action" />

                    <fluent:Button Header="Redo"
                                   Command="{Binding RedoCommand}"
                                   IsEnabled="{Binding CanRedo}"
                                   ToolTip="Redo last undone action" />
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>


            <!-- Analyze tab (future) -->
            <fluent:RibbonTabItem Header="Analyze">
                <fluent:RibbonGroupBox Header="Analysis">
                    <fluent:Button Header="Run Analysis"
                                   LargeIcon="{x:Null}"
                                   ToolTip="Run structural analysis (placeholder)"
                                   IsEnabled="False"/>
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>

            <!-- Help tab -->
            <fluent:RibbonTabItem Header="Help">
                <fluent:RibbonGroupBox Header="About">
                    <fluent:Button Header="About cb_FRAME"
                                   LargeIcon="{x:Null}"
                                   ToolTip="About dialog (placeholder)"
                                   IsEnabled="False"/>
                </fluent:RibbonGroupBox>
            </fluent:RibbonTabItem>
        </fluent:Ribbon>

        <!-- MAIN CONTENT AREA: Left / Center / Right panels -->
        <Grid Grid.Row="1" Margin="8">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="260" />
                <!-- Left: Explorer -->
                <ColumnDefinition Width="*" />
                <!-- Center: 3D viewport -->
                <ColumnDefinition Width="320" />
                <!-- Right: Properties + Data Entry -->
            </Grid.ColumnDefinitions>

            <!-- LEFT: Explorer -->
            <views:ExplorerPanelView Grid.Column="0"
                                     Margin="0,0,4,0"
                                     DataContext="{Binding Explorer}" />

            <!-- CENTER: 3D viewport -->
            <views:Model3DView Grid.Column="1"
                               DataContext="{Binding Model3D}" />

            <!-- RIGHT: Properties (top) + Data Entry (bottom) -->
            <Grid Grid.Column="2" Margin="8,0,0,0">
                <Grid.RowDefinitions>
                    <RowDefinition Height="2*" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <views:PropertiesPanelView Grid.Row="0"
                                           DataContext="{Binding Properties}" />

                <views:DataEntryPanelView Grid.Row="1"
                                          DataContext="{Binding DataEntry}" />
            </Grid>
        </Grid>

        <!-- STATUS BAR -->
        <StatusBar Grid.Row="2"
                   Background="{DynamicResource StatusBarBackgroundBrush}"
                   Foreground="{DynamicResource StatusBarForegroundBrush}">
            <StatusBarItem>
                <TextBlock Text="{Binding StatusText}" />
            </StatusBarItem>
            
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding RightStatusText}" />
            </StatusBarItem>
            
            <StatusBarItem>
                <TextBlock Text="{Binding StatusText}" />
            </StatusBarItem>

            <StatusBarItem>
                <TextBlock Text="{Binding ActiveToolName}" />
            </StatusBarItem>

            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock Text="{Binding RightStatusText}" />
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
